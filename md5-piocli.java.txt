<dependency>
	<groupId>info.picocli</groupId>
	<artifactId>picocli</artifactId>
	<version>4.6.2</version>
</dependency>


<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-shade-plugin</artifactId>
	<version>2.4.3</version>
	<configuration>
		<!-- put your configurations here -->
		<transformers>
			<transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
				<mainClass>cli.CheckSum</mainClass>
			</transformer>
		</transformers>
		<artifactSet>
			<includes>
				<include>*:*</include>
			</includes>
			<excludes>
				<exclude>org.projectlombok:lombok</exclude>
			</excludes>
		</artifactSet>
	</configuration>
	<executions>
		<execution>
			<phase>package</phase>
			<goals>
				<goal>shade</goal>
			</goals>
		</execution>
	</executions>
</plugin>



@CommandLine.Command(
        name = "checksum",
        mixinStandardHelpOptions = true,
        version = "4.0",
        description = "Prints the checksum (MD5 by default) of a file to STDOUT."
)
public class CheckSum implements Callable<String> {

    @CommandLine.Parameters(index = "0", description = "The file whose checksum to calculate.")
    private File file;

    @CommandLine.Option(names = {"-a", "--algorithm"}, description = "MD5, SHA-1, SHA-256, ...")
    private String algorithm = "MD5";

    @Override
    public String call() throws Exception {
        byte[] bytes = Files.readAllBytes(file.toPath());
        String sign = DigestUtils.md5Hex(bytes);
        System.out.println(sign);
        return sign;
    }

    public static void main(String[] args) {
        int exitCode  = new CommandLine(new CheckSum()).execute(args);
        System.exit(exitCode);
    }
}